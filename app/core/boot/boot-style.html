<dom-module id="boot-style">
  <script>
    class BootStyle {
      beforeRegister() {
        this.is = 'boot-style';
      }

      init() {
        return new Promise((resolve, reject) => {
          this.resolve = resolve;
          this.reject = reject;
          this.importStyle();
        });
      }

      importStyle() {
        const style = store.getState().settings.style;
        return new Promise((resolve, reject) => {
          this.importHref('../../../content/styles/style-' + style + '.html', () => {
            const message = 'style loaded';
            app.runHook('styleImported');
            this.resolve({
              message: message
            });
          }, (err) => {
            this.reject(err);
          });
        });
      }
    }
    Polymer(BootStyle);
  </script>
</dom-module>
