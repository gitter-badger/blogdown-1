<dom-module id="boot-theme">
  <script>
    class BootTheme {
      beforeRegister() {
        this.is = 'boot-theme';

        this.properties = {
          theme: {
            type: Object,
            statePath: 'settings.theme'
          }
        };
      }

      get behaviors() {
        return [ReduxBehavior];
      }

      init() {
        return this.importTheme().then(() => {
          app.runHook('themeImported');
          return;
        });
      }

      importTheme() {
        return this.importHrefPromise('../../../content/themes/' + this.theme + '/theme-body.html').then(() => {
          return this.importHrefPromise('../../../content/themes/' + this.theme + '/theme-page.html');
        }).then(() => {
          return this.importHrefPromise('../../../content/themes/' + this.theme + '/theme-posts.html');
        }).then(() => {
          return this.importHrefPromise('../../../content/themes/' + this.theme + '/theme-post.html');
        });
      }

      importHrefPromise(url) {
        return new Promise((resolve, reject) => {
          this.importHref(url, () => {
            resolve();
          }, (err) => {
            reject(err);
          });
        });
      }
    }
    Polymer(BootTheme);
  </script>
</dom-module>
