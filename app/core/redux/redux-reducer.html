<script>

  const reducer = (state, action) => {
    if (!state) return initialState;
    switch (action.type) {
      case LOAD_SETTINGS:
        return _.assign({}, state, {
          settings: _.clone(action.settings)
        });
      case LOAD_AUTHORS:
        return _.assign({}, state, {
          authors: _.clone(action.authors)
        });
      case LOAD_PAGES:
        return _.assign({}, state, {
          pages: _.clone(action.pages)
        });
      case LOAD_TAXONOMIES:
        return _.assign({}, state, {
          taxonomies: _.clone(action.taxonomies)
        });
      case CHANGE_ROUTE:
        return _.assign({}, state, {
          route: _.clone(action.route)
        });
      case APP_LOADED:
        return _.assign({}, state, {
          meta: _.assign({}, state.meta, {
            appLoaded: true
          })
        });
      case APP_LOADING:
        return _.assign({}, state, {
          meta: _.assign({}, state.meta, {
            loading: action.loading
          })
        });
      case APP_PROGRESS:
        return _.assign({}, state, {
          meta: _.assign({}, state.meta, {
            progress: action.progress
          })
        });
      case UPDATE_NARROW:
        return _.assign({}, state, {
          meta: _.assign({}, state.meta, {
            narrow: action.narrow
          })
        });
      case UPDATE_SELECTED_MENU_ITEM:
        return _.assign({}, state, {
          meta: _.assign({}, state.meta, {
            selectedMenuItem: action.selectedMenuItem
          })
        });
      case SET_BASE_URL:
        return _.assign({}, state, {
          meta: _.assign({}, state.meta, {
            baseUrl: action.baseUrl
          })
        });
      case SET_HASH_ID:
        return _.assign({}, state, {
          meta: _.assign({}, state.meta, {
            hashId: action.hashId
          })
        });
      default:
        return state;
    }
  };

</script>
